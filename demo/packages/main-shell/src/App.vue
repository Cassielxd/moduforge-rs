<template>
  <div id="app">
    <div class="app-container">
      <!-- ä½¿ç”¨å…±äº«å¤´éƒ¨ç»„ä»¶ -->
      <AppHeader
        title="é€ ä»·ç®¡ç†ç³»ç»Ÿ"
        :show-window-controls="true"
        :use-child-window="true"
        @minimize="onMinimize"
        @maximize="onMaximize"
        @close="onClose"
      >
        <template #center>
          <el-menu
            :default-active="$route.path"
            mode="horizontal"
            router
            class="main-nav"
          >
            <el-menu-item index="/">å·¥ä½œå°</el-menu-item>
            <el-menu-item index="/rough-estimate">æ¦‚ç®—</el-menu-item>
            <el-menu-item index="/budget">é¢„ç®—</el-menu-item>
            <el-menu-item index="/budget-review">é¢„ç®—å®¡æ ¸</el-menu-item>
            <el-menu-item index="/settlement">ç»“ç®—</el-menu-item>
            <el-menu-item index="/settlement-review">ç»“ç®—å®¡æ ¸</el-menu-item>
          </el-menu>
        </template>
      </AppHeader>

      <!-- ä¸»å†…å®¹åŒº -->
      <div class="app-main">
        <router-view />
      </div>
    </div>
  </div>
</template>

<script setup>
import { onMounted } from 'vue'
import { AppHeader } from '@cost-app/shared-components'

// çª—å£æ§åˆ¶æ–¹æ³•
const onMinimize = () => {
  console.log('ä¸»åº”ç”¨çª—å£æœ€å°åŒ–')
  // AppHeader ç»„ä»¶ä¼šè‡ªåŠ¨å¤„ç†çª—å£æ§åˆ¶é€»è¾‘
}

const onMaximize = () => {
  console.log('ä¸»åº”ç”¨çª—å£æœ€å¤§åŒ–/è¿˜åŸ')
  // AppHeader ç»„ä»¶ä¼šè‡ªåŠ¨å¤„ç†çª—å£æ§åˆ¶é€»è¾‘
}

const onClose = () => {
  console.log('ä¸»åº”ç”¨çª—å£å…³é—­')
  // AppHeader ç»„ä»¶ä¼šè‡ªåŠ¨å¤„ç†çª—å£æ§åˆ¶é€»è¾‘
}

onMounted(() => {
  console.log('ğŸ  ä¸»åº”ç”¨å·²å¯åŠ¨')
})
</script>

<style scoped>
.app-container {
  height: 100vh;
  display: flex;
  flex-direction: column;
}

.main-nav {
  flex: 1;
  border-bottom: none;
  background: transparent;
}

.main-nav :deep(.el-menu-item) {
  color: white;
  border-bottom: 2px solid transparent;
}

.main-nav :deep(.el-menu-item:hover) {
  background-color: rgba(255, 255, 255, 0.1);
  color: white;
}

.main-nav :deep(.el-menu-item.is-active) {
  background-color: rgba(255, 255, 255, 0.2);
  border-bottom-color: white;
  color: white;
}

.app-main {
  flex: 1;
  background: #f5f7fa;
  padding: 20px;
  overflow-y: auto;
}
</style>
