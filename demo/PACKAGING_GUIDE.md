# ğŸ“¦ å¾®å‰ç«¯æ¨¡å—æ‰“åŒ…æŒ‡å—

## ğŸ¯ é—®é¢˜æè¿°

åŸæœ¬çš„é¡¹ç›®åœ¨ Tauri æ‰“åŒ…æ—¶ï¼Œåªæ‰“åŒ…äº†ä¸»åº”ç”¨ï¼Œè€Œ `packages/` ç›®å½•ä¸­çš„å­æ¨¡å—ï¼ˆå¦‚ `rough-estimate`ã€`main-shell` ç­‰ï¼‰æ²¡æœ‰è¢«åŒ…å«åœ¨æœ€ç»ˆçš„æ‰“åŒ…äº§ç‰©ä¸­ï¼Œå¯¼è‡´æ‰“åŒ…åçš„ç¨‹åºæ— æ³•æ‰¾åˆ°è¿™äº›å­æ¨¡å—é¡µé¢ã€‚

## âœ… è§£å†³æ–¹æ¡ˆ

### 1. ä¿®æ”¹æ„å»ºè„šæœ¬

åœ¨ `demo/package.json` ä¸­ä¿®æ”¹äº†æ„å»ºè„šæœ¬ï¼Œç¡®ä¿åœ¨æ„å»ºä¸»åº”ç”¨ä¹‹å‰å…ˆæ„å»ºæ‰€æœ‰å­æ¨¡å—ï¼š

```json
{
  "scripts": {
    "build": "npm run build:packages && vite build",
    "build:packages": "npm run build:rough-estimate && npm run build:main-shell && npm run build:shared-components",
    "build:rough-estimate": "cd packages/rough-estimate && npm run build && npm run copy-dist",
    "build:main-shell": "cd packages/main-shell && npm run build && npm run copy-dist",
    "build:shared-components": "cd packages/shared-components && npm run build"
  }
}
```

### 2. æ·»åŠ å¤åˆ¶è„šæœ¬

ä¸ºæ¯ä¸ªå­æ¨¡å—æ·»åŠ äº†å¤åˆ¶è„šæœ¬ï¼Œå°†æ„å»ºäº§ç‰©å¤åˆ¶åˆ°ä¸»åº”ç”¨çš„ `dist` ç›®å½•ï¼š

- `packages/rough-estimate/copy-dist.js`
- `packages/main-shell/copy-dist.js`

### 3. ä¿®æ”¹ Vite é…ç½®

åœ¨ä¸»åº”ç”¨çš„ `vite.config.js` ä¸­æ·»åŠ äº† `copyPackagesPlugin` æ’ä»¶ï¼Œç¡®ä¿åœ¨æ„å»ºæ—¶è‡ªåŠ¨å¤åˆ¶å­æ¨¡å—çš„æ„å»ºäº§ç‰©ã€‚

### 4. ä¿®æ”¹çª—å£åˆ›å»ºé€»è¾‘

åœ¨ `src/views/Dashboard.vue` ä¸­ä¿®æ”¹äº† `openModule` å‡½æ•°ï¼Œä½¿å…¶èƒ½å¤Ÿåœ¨å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒä¸­æ­£ç¡®å¤„ç† URLï¼š

- **å¼€å‘ç¯å¢ƒ**: ä½¿ç”¨ `http://localhost:ç«¯å£` è®¿é—®å¼€å‘æœåŠ¡å™¨
- **ç”Ÿäº§ç¯å¢ƒ**: ä½¿ç”¨ç›¸å¯¹è·¯å¾„ `æ¨¡å—å/index.html` è®¿é—®æ‰“åŒ…åçš„é™æ€æ–‡ä»¶

åœ¨ `src-tauri/src/main.rs` ä¸­ä¿®æ”¹äº† `create_module_window` å‡½æ•°ï¼Œä½¿å…¶èƒ½å¤Ÿæ­£ç¡®å¤„ç†ç›¸å¯¹è·¯å¾„ã€‚

## ğŸ“ æ„å»ºäº§ç‰©ç»“æ„

æ„å»ºå®Œæˆåï¼Œ`dist` ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š

```
dist/
â”œâ”€â”€ index.html              # ä¸»åº”ç”¨å…¥å£
â”œâ”€â”€ splashscreen.html       # å¯åŠ¨å±å¹•
â”œâ”€â”€ favicon.ico             # å›¾æ ‡
â”œâ”€â”€ assets/                 # ä¸»åº”ç”¨èµ„æº
â”‚   â”œâ”€â”€ Dashboard-xxx.css
â”‚   â”œâ”€â”€ Dashboard-xxx.js
â”‚   â”œâ”€â”€ index-xxx.css
â”‚   â””â”€â”€ index-xxx.js
â”œâ”€â”€ main-shell/             # ä¸»åº”ç”¨æ¨¡å—
â”‚   â”œâ”€â”€ index.html
â”‚   â””â”€â”€ assets/
â””â”€â”€ rough-estimate/         # æ¦‚ç®—æ¨¡å—
    â”œâ”€â”€ index.html
    â””â”€â”€ assets/
```

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### å¼€å‘ç¯å¢ƒ

1. å¯åŠ¨å­æ¨¡å—ï¼ˆå¦‚éœ€è¦ï¼‰ï¼š
```bash
cd packages/rough-estimate
npm run dev
```

2. å¯åŠ¨ä¸»åº”ç”¨ï¼š
```bash
npm run tauri:dev
```

### ç”Ÿäº§ç¯å¢ƒæ„å»º

1. æ„å»ºæ‰€æœ‰æ¨¡å—ï¼š
```bash
npm run build
```

2. æ‰“åŒ… Tauri åº”ç”¨ï¼š
```bash
npm run tauri:build
```

## âœ¨ ç‰¹æ€§

- âœ… è‡ªåŠ¨æ„å»ºæ‰€æœ‰å­æ¨¡å—
- âœ… è‡ªåŠ¨å¤åˆ¶æ„å»ºäº§ç‰©åˆ°ä¸»åº”ç”¨
- âœ… å¼€å‘ç¯å¢ƒå’Œç”Ÿäº§ç¯å¢ƒè‡ªåŠ¨åˆ‡æ¢ URL å¤„ç†
- âœ… æ”¯æŒåœ¨æ–°çª—å£ä¸­æ‰“å¼€å­æ¨¡å—
- âœ… å®Œæ•´çš„å¾®å‰ç«¯æ¶æ„æ”¯æŒ

## ğŸ”§ æ•…éšœæ’é™¤

### æ„å»ºå¤±è´¥

å¦‚æœæ„å»ºå¤±è´¥ï¼Œè¯·æ£€æŸ¥ï¼š

1. æ‰€æœ‰å­æ¨¡å—çš„ä¾èµ–æ˜¯å¦å·²å®‰è£…
2. å­æ¨¡å—çš„ `vite.config.js` é…ç½®æ˜¯å¦æ­£ç¡®
3. å¤åˆ¶è„šæœ¬æ˜¯å¦æœ‰æƒé™è®¿é—®ç›®æ ‡ç›®å½•

### å­æ¨¡å—æ— æ³•æ‰“å¼€

å¦‚æœæ‰“åŒ…åçš„åº”ç”¨ä¸­å­æ¨¡å—æ— æ³•æ‰“å¼€ï¼Œè¯·æ£€æŸ¥ï¼š

1. `dist` ç›®å½•ä¸­æ˜¯å¦åŒ…å«å­æ¨¡å—æ–‡ä»¶å¤¹
2. å­æ¨¡å—çš„ `index.html` æ–‡ä»¶æ˜¯å¦å­˜åœ¨
3. Tauri çš„å®‰å…¨é…ç½®æ˜¯å¦å…è®¸è®¿é—®æœ¬åœ°æ–‡ä»¶

## ğŸ“ æ³¨æ„äº‹é¡¹

- æ¯æ¬¡ä¿®æ”¹å­æ¨¡å—åï¼Œéœ€è¦é‡æ–°è¿è¡Œ `npm run build` æ¥æ›´æ–°æ„å»ºäº§ç‰©
- å­æ¨¡å—çš„è·¯ç”±é…ç½®åº”è¯¥ä½¿ç”¨ç›¸å¯¹è·¯å¾„
- ç¡®ä¿æ‰€æœ‰å­æ¨¡å—éƒ½æœ‰æ­£ç¡®çš„ `index.html` å…¥å£æ–‡ä»¶
